<!DOCTYPE html>
<html>
  <head>
    <title>AR.js Demo - QR activa imágenes</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.min.js"></script>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100%;
        width: 100%;
      }

      .arjs-loader {
        height: 100%;
        width: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .arjs-loader div {
        text-align: center;
        font-size: 1.25em;
        color: white;
      }

      a-scene {
        position: absolute !important;
        top: 0; left: 0;
        height: 100% !important;
        width: 100% !important;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body style="margin:0; padding:0; overflow:hidden; height:100%; width:100%;">
    <!-- Loader para indicar que AR.js está cargando -->
    <div class="arjs-loader">
      <div>Cargando Realidad Aumentada...</div>
    </div>

    <!-- Escena A-Frame con AR.js -->
    <a-scene
      vr-mode-ui="enabled: true;"
      renderer="logarithmicDepthBuffer: true;"
      arjs="sourceType: webcam; debugUIEnabled: true;"
      embedded
      id="arScene"
    >
      <!--
        INSTRUCCIONES:
        1. Genera un CÓDIGO QR que contenga el valor "myarscene" (o el que quieras).
        2. Imprime ese código QR.
        3. Asegúrate de que tus imágenes FIG1-FIG5 estén en la carpeta 'resources'
           (o la ruta que especifiques en 'src').
        4. Apunta la cámara al QR impreso para ver las imágenes en RA.
      -->

      <script>
        window.addEventListener('arjs-video-loaded', () => {
          const loader = document.querySelector('.arjs-loader');
          if (loader) {
            loader.style.display = 'none';
          }
        });
      </script>

      <!-- Marcador ÚNICO para el QR -->
      <a-marker preset="hiro">
        <!-- Las imágenes se mostrarán como planos 3D sobre el QR -->
        <!-- FIG1 - Posicionada ligeramente por encima del QR -->
        <a-image src="png/FIG1_final_cropped.png"
          width="1" height="2" position="0 0.5 0" rotation="0 0 0"></a-image>
      </a-marker>

      <a-marker type="pattern" url="pattern/pattern-alpha.patt">
        <!-- FIG2 - Posicionada a la derecha del QR -->
        <a-image src="png/FIG2_final_cropped.png"
          width="1" height="1" position="0 0.5 0" rotation="0 0 0"></a-image>
      </a-marker>

      <a-marker type="pattern" url="pattern/pattern-beta.patt"></a-marker>
        <!-- FIG3 - Posicionada a la izquierda del QR -->
        <a-image src="png/FIG3_final_cropped.png"
          width="1" height="1" position="0 0.5 0" rotation="0 0 0"></a-image>
      </a-marker>

      <a-marker preset="Gamma">
        <!-- FIG4 - Posicionada detrás del QR (para verla, tendrás que girar el QR) -->
        <a-image src="png/FIG4_final_cropped.png"
          width="1" height="1" position="0 0.5 0" rotation="0 0 0"></a-image>
      </a-marker>

      <a-marker preset="Delta">
        <!-- FIG5 - Posicionada delante del QR (para verla, tendrás que alejarte un poco) -->
        <a-image src="png/FIG5_final_cropped.png"
          width="1" height="1" position="0 0.5 0" rotation="0 0 0"></a-image>
      </a-marker>
      <!-- Cámara para la RA -->
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
